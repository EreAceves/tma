---
title: "Fishery Model"
date: "`r Sys.Date()`"
output: html_document
---

#####Objective: Step through optimal aggregate harvest in an open access fishery.
Swap out toy model for INAPESCA's age-structured model. Sort out selectivity and dam problems.

Toy Model (Conrad):

Stock
$$ X_{t+1} = X_t (1 + r - r X_t / K - qE_t) $$

Yield-Effort
$$ Y_t = q X_t E_t $$

Dynamic Effort
$$ E_{t+1} =  E_t ( 1 + \eta (p q X_t - c )) $$

Variable  | Definition
--------- | ---------------------------
*t*       | Timestep (Year)
*X*       | Stock (Tons)
*r*       | Growth (%)
*K*       | Carrying Capacity (Tons)
*q*       | Catchability (Parameter)
*E*       | Effort (Vessel Days)
$\eta$    | Adjustability Parameter
*p*       | Price (USD2018 / Ton)
*c*       | Cost (USD2018 / Boat Day)


```{r pkg_ins, include = FALSE}

# Check out knitr for knitr::read_chunk.
library(knitr)

# Name packages.
pkg <- c("readr",
         "knitr",
         "tidyverse",
         "gapminder",
         "sandwich",
         "broom",
         "stargazer",
         "cowplot",
         "kableExtra")

# Install packages.
#install.packages(pkg, verbose = FALSE, quiet = TRUE)
  
# Update packages.
#update.packages(pkg, verbose = FALSE, quiet = TRUE)

# Check out packages.
lapply(pkg, library, character.only = TRUE)

```

#####1. Deterministic Logistic Growth Demo

$$ N_t = N_t + rN_t(1-N_t/K) $$

```{r stock_function}

#Model growth w/o mortality.
grow_log = function(r, K, n0, start, end){
                     v_n = as.numeric(vector(length=(end - start)))
                     v_n[1] = n0
                     t = length(seq(start, end))
            for (i in 2:t){v_n[i] = v_n[i - 1] + r * v_n[i - 1] * (1 - v_n[i - 1] / K)}
                     return(v_n)}

v_grow_log = grow_log(0.25, 50, 10, 2000, 2025)

plot(v_grow_log)

```

```{r effort_function}

#Model effort at MSY, economic optimum over changes in price, costs.


```

```{r alltogethernow}

#Model growth and effort together. Try to get extinction?



```


```{r figures}



```


#####Appendix: LaTeX Demo

$$ d_i = \alpha_{0, i} - \alpha_{1, i} * x_{emissions} + u_i$$